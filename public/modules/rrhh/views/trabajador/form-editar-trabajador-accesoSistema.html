<div name="form" sg-read-only="!(access.administrarTrabajadores || access.administrarTrabajadoresAgencia)" class="form-horizontal" novalidate>

	<fieldset class="border-top">
		<legend><span class="text ng-scope">Asignar usuario <i class="fa fa-question-circle text-muted ng-scope"
																tooltip="Usuario asignado en el sistema actualmente."
																tooltip-placement="right"></i></span></legend>

		<form name="form" data-ng-submit="setUsuario()" class="form-horizontal" novalidate>
			<div class="form-group" ng-class="{ 'has-error' : form.usuario.$invalid && form.usuario.$dirty}">
				<label class="col-sm-2 control-label"><span class="required">*</span> Usuario:</label>
				<div class="col-sm-3">
					<input type="text" name="usuario" ng-model="view.usuario" ng-minlength="1" ng-maxlength="60" class="form-control" autofocus required/>
					<div ng-messages="form.usuario.$error" ng-if="form.usuario.$dirty">
						<div class="has-error" ng-message="required">Ingrese denominacion.</div>
						<div class="has-error" ng-message="maxlength">Minimo 1 caracter.</div>
						<div class="has-error" ng-message="maxlength">Maximo 60 caracteres.</div>
						<div class="has-error" ng-message="disponible">Usuario no disponible.</div>
					</div>
				</div>
				<div class="col-sm-3" data-ng-if="view.trabajador.usuario">
					<button type="button" data-ng-click="desvincular()" class="btn btn-default">Desvincular usuario</button>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<button type="submit" class="btn btn-primary">Guardar</button>
					<button sg-cancel ui-sref="^.resumen">Cancelar</button>
				</div>
			</div>
		</form>
	</fieldset>

	<fieldset data-ng-if="view.trabajador.usuario" class="border-top">
		<legend><span class="text ng-scope">Asignar roles <i class="fa fa-question-circle text-muted ng-scope"
																tooltip="Usuario a asignar en el sistema."
																tooltip-placement="right"></i></span></legend>

		<div class="form-group" ng-class="{ 'has-error' : form.roles.$invalid && form.$submitted}">
			<label class="col-sm-2 control-label"><span class="required">*</span> Roles:</label>
			<div class="col-sm-6">
				<div class="row">
					<div class="col-md-5">
						<label class="control-label">Roles disponibles <i class="fa fa-question-circle text-muted ng-scope" tooltip="Roles disponibles en el sistema." tooltip-placement="right"></i></label>
						<select class="form-control" multiple size="5" ng-multiple="true" data-ng-model="combo.selected.rol" ng-options="r.name for r in combo.rol">
						</select>
						<button class="btn btn-default" type="submit" ng-click="addRol()" tooltip="Asociar rol" tooltip-placement="right">
							Asignar seleccionados <i class="fa fa-angle-double-right"></i>
						</button>
					</div>
					<div class="col-md-5">
						<label class="control-label ng-scope">Roles asociados<i class="fa fa-question-circle text-muted ng-scope" tooltip="Roles asociados a este usuario." tooltip-placement="right"></i></label>
						<select class="form-control" multiple size="5" ng-multiple="true" ng-model="combo.selected.rol" ng-options="r.name for r in realmMappings">
						</select>
						<button class="btn btn-default" type="submit" ng-click="deleteRol()" tooltip="Quitar rol" tooltip-placement="left">
							<i class="fa fa-angle-double-left"></i> Quitar seleccionados
						</button>
					</div>
				</div>
			</div>
		</div>
		<div class="form-group">
			<div class="col-sm-offset-2 col-sm-10">
				<button sg-save>Guardar</button>
				<button sg-cancel ui-sref="^.resumen">Cancelar</button>
			</div>
		</div>
	</fieldset>
</div>
